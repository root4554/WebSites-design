/*!
 * @pixi/utils - v7.0.0-alpha.3
 * Compiled Fri, 23 Sep 2022 14:33:14 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */import{settings as g}from"@pixi/settings";import{isMobile as ia}from"@pixi/settings";import{default as sa}from"eventemitter3";import{default as ca}from"earcut";import{parse as $,format as M,resolve as N}from"url";import{BLEND_MODES as d}from"@pixi/constants";const k={parse:$,format:M,resolve:N};function u(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function x(e){return e.split("?")[0].split("#")[0]}function O(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(e,r,t){return e.replace(new RegExp(O(r),"g"),t)}function L(e,r){let t="",a=0,o=-1,n=0,i;for(let l=0;l<=e.length;++l){if(l<e.length)i=e.charCodeAt(l);else{if(i===47)break;i=47}if(i===47){if(!(o===l-1||n===1))if(o!==l-1&&n===2){if(t.length<2||a!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const s=t.lastIndexOf("/");if(s!==t.length-1){s===-1?(t="",a=0):(t=t.slice(0,s),a=t.length-1-t.lastIndexOf("/")),o=l,n=0;continue}}else if(t.length===2||t.length===1){t="",a=0,o=l,n=0;continue}}r&&(t.length>0?t+="/..":t="..",a=2)}else t.length>0?t+=`/${e.slice(o+1,l)}`:t=e.slice(o+1,l),a=l-o-1;o=l,n=0}else i===46&&n!==-1?++n:n=-1}return t}const A={toPosix(e){return I(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){u(e),e=this.toPosix(e);let r="";const t=/^file:\/\/\//.exec(e),a=/^[^/:]+:\/\//.exec(e),o=/^[^/:]+:\//.exec(e);if(t||a||o){const n=t?.[0]||a?.[0]||o?.[0];r=n,e=e.slice(n.length)}return r},toAbsolute(e,r,t){if(this.isDataUrl(e))return e;const a=x(this.toPosix(r??g.ADAPTER.getBaseUrl())),o=x(this.toPosix(t??this.rootname(a)));return u(e),e=this.toPosix(e),e.startsWith("/")?A.join(o,e.slice(1)):this.isAbsolute(e)?e:this.join(a,e)},normalize(e){if(e=this.toPosix(e),u(e),e.length===0)return".";let r="";const t=e.startsWith("/");this.hasProtocol(e)&&(r=this.rootname(e),e=e.slice(r.length));const a=e.endsWith("/");return e=L(e,!1),e.length>0&&a&&(e+="/"),t?`/${e}`:r+e},isAbsolute(e){return u(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let r;for(let t=0;t<e.length;++t){const a=e[t];if(u(a),a.length>0)if(r===void 0)r=a;else{const o=e[t-1]??"";this.extname(o)?r+=`/../${a}`:r+=`/${a}`}}return r===void 0?".":this.normalize(r)},dirname(e){if(u(e),e.length===0)return".";e=this.toPosix(e);let r=e.charCodeAt(0);const t=r===47;let a=-1,o=!0;const n=this.getProtocol(e),i=e;e=e.slice(n.length);for(let l=e.length-1;l>=1;--l)if(r=e.charCodeAt(l),r===47){if(!o){a=l;break}}else o=!1;return a===-1?t?"/":this.isUrl(i)?n+e:n:t&&a===1?"//":n+e.slice(0,a)},rootname(e){u(e),e=this.toPosix(e);let r="";if(e.startsWith("/")?r="/":r=this.getProtocol(e),this.isUrl(e)){const t=e.indexOf("/",r.length);t!==-1?r=e.slice(0,t):r=e,r.endsWith("/")||(r+="/")}return r},basename(e,r){u(e),r&&u(r),e=this.toPosix(e);let t=0,a=-1,o=!0,n;if(r!==void 0&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";let i=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){const s=e.charCodeAt(n);if(s===47){if(!o){t=n+1;break}}else l===-1&&(o=!1,l=n+1),i>=0&&(s===r.charCodeAt(i)?--i===-1&&(a=n):(i=-1,a=l))}return t===a?a=l:a===-1&&(a=e.length),e.slice(t,a)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===47){if(!o){t=n+1;break}}else a===-1&&(o=!1,a=n+1);return a===-1?"":e.slice(t,a)},extname(e){u(e),e=this.toPosix(e);let r=-1,t=0,a=-1,o=!0,n=0;for(let i=e.length-1;i>=0;--i){const l=e.charCodeAt(i);if(l===47){if(!o){t=i+1;break}continue}a===-1&&(o=!1,a=i+1),l===46?r===-1?r=i:n!==1&&(n=1):r!==-1&&(n=-1)}return r===-1||a===-1||n===0||n===1&&r===a-1&&r===t+1?"":e.slice(r,a)},parse(e){u(e);const r={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return r;e=this.toPosix(e);let t=e.charCodeAt(0);const a=this.isAbsolute(e);let o;r.root=this.rootname(e),a||this.hasProtocol(e)?o=1:o=0;let n=-1,i=0,l=-1,s=!0,f=e.length-1,c=0;for(;f>=o;--f){if(t=e.charCodeAt(f),t===47){if(!s){i=f+1;break}continue}l===-1&&(s=!1,l=f+1),t===46?n===-1?n=f:c!==1&&(c=1):n!==-1&&(c=-1)}return n===-1||l===-1||c===0||c===1&&n===l-1&&n===i+1?l!==-1&&(i===0&&a?r.base=r.name=e.slice(1,l):r.base=r.name=e.slice(i,l)):(i===0&&a?(r.name=e.slice(1,n),r.base=e.slice(1,l)):(r.name=e.slice(i,n),r.base=e.slice(i,l)),r.ext=e.slice(n,l)),r.dir=this.dirname(e),r},sep:"/",delimiter:":"};g.RETINA_PREFIX=/@([0-9\.]+)x/,g.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;let y=!1;const E="7.0.0-alpha.3";function U(){y=!0}function q(e){if(!y){if(g.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const r=[`
 %c %c %c PixiJS ${E} - \u2730 ${e} \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];globalThis.console.log(...r)}else globalThis.console&&globalThis.console.log(`PixiJS ${E} - ${e} - http://www.pixijs.com/`);y=!0}}let w;function S(){return typeof w>"u"&&(w=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:g.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!g.ADAPTER.getWebGLRenderingContext())return!1;const r=g.ADAPTER.createCanvas();let t=r.getContext("webgl",e)||r.getContext("experimental-webgl",e);const a=!!(t&&t.getContextAttributes().stencil);if(t){const o=t.getExtension("WEBGL_lose_context");o&&o.loseContext()}return t=null,a}catch{return!1}}()),w}var F="#f0f8ff",W="#faebd7",j="#00ffff",z="#7fffd4",B="#f0ffff",J="#f5f5dc",G="#ffe4c4",Y="#000000",H="#ffebcd",V="#0000ff",X="#8a2be2",Q="#a52a2a",K="#deb887",Z="#5f9ea0",ee="#7fff00",re="#d2691e",te="#ff7f50",ae="#6495ed",oe="#fff8dc",ne="#dc143c",ie="#00ffff",le="#00008b",se="#008b8b",fe="#b8860b",ce="#a9a9a9",de="#006400",ue="#a9a9a9",ge="#bdb76b",he="#8b008b",ve="#556b2f",be="#ff8c00",pe="#9932cc",me="#8b0000",ye="#e9967a",we="#8fbc8f",ke="#483d8b",xe="#2f4f4f",Ae="#2f4f4f",Ee="#00ced1",Pe="#9400d3",Ce="#ff1493",Re="#00bfff",Te="#696969",_e="#696969",De="#1e90ff",$e="#b22222",Me="#fffaf0",Ne="#228b22",Oe="#ff00ff",Ie="#dcdcdc",Le="#f8f8ff",Ue="#daa520",qe="#ffd700",Se="#808080",Fe="#008000",We="#adff2f",je="#808080",ze="#f0fff0",Be="#ff69b4",Je="#cd5c5c",Ge="#4b0082",Ye="#fffff0",He="#f0e68c",Ve="#fff0f5",Xe="#e6e6fa",Qe="#7cfc00",Ke="#fffacd",Ze="#add8e6",er="#f08080",rr="#e0ffff",tr="#fafad2",ar="#d3d3d3",or="#90ee90",nr="#d3d3d3",ir="#ffb6c1",lr="#ffa07a",sr="#20b2aa",fr="#87cefa",cr="#778899",dr="#778899",ur="#b0c4de",gr="#ffffe0",hr="#00ff00",vr="#32cd32",br="#faf0e6",pr="#ff00ff",mr="#800000",yr="#66cdaa",wr="#0000cd",kr="#ba55d3",xr="#9370db",Ar="#3cb371",Er="#7b68ee",Pr="#00fa9a",Cr="#48d1cc",Rr="#c71585",Tr="#191970",_r="#f5fffa",Dr="#ffe4e1",$r="#ffe4b5",Mr="#ffdead",Nr="#000080",Or="#fdf5e6",Ir="#808000",Lr="#6b8e23",Ur="#ffa500",qr="#ff4500",Sr="#da70d6",Fr="#eee8aa",Wr="#98fb98",jr="#afeeee",zr="#db7093",Br="#ffefd5",Jr="#ffdab9",Gr="#cd853f",Yr="#ffc0cb",Hr="#dda0dd",Vr="#b0e0e6",Xr="#800080",Qr="#663399",Kr="#ff0000",Zr="#bc8f8f",et="#4169e1",rt="#8b4513",tt="#fa8072",at="#f4a460",ot="#2e8b57",nt="#fff5ee",it="#a0522d",lt="#c0c0c0",st="#87ceeb",ft="#6a5acd",ct="#708090",dt="#708090",ut="#fffafa",gt="#00ff7f",ht="#4682b4",vt="#d2b48c",bt="#008080",pt="#d8bfd8",mt="#ff6347",yt="#40e0d0",wt="#ee82ee",kt="#f5deb3",xt="#ffffff",At="#f5f5f5",Et="#ffff00",Pt="#9acd32",Ct={aliceblue:F,antiquewhite:W,aqua:j,aquamarine:z,azure:B,beige:J,bisque:G,black:Y,blanchedalmond:H,blue:V,blueviolet:X,brown:Q,burlywood:K,cadetblue:Z,chartreuse:ee,chocolate:re,coral:te,cornflowerblue:ae,cornsilk:oe,crimson:ne,cyan:ie,darkblue:le,darkcyan:se,darkgoldenrod:fe,darkgray:ce,darkgreen:de,darkgrey:ue,darkkhaki:ge,darkmagenta:he,darkolivegreen:ve,darkorange:be,darkorchid:pe,darkred:me,darksalmon:ye,darkseagreen:we,darkslateblue:ke,darkslategray:xe,darkslategrey:Ae,darkturquoise:Ee,darkviolet:Pe,deeppink:Ce,deepskyblue:Re,dimgray:Te,dimgrey:_e,dodgerblue:De,firebrick:$e,floralwhite:Me,forestgreen:Ne,fuchsia:Oe,gainsboro:Ie,ghostwhite:Le,goldenrod:Ue,gold:qe,gray:Se,green:Fe,greenyellow:We,grey:je,honeydew:ze,hotpink:Be,indianred:Je,indigo:Ge,ivory:Ye,khaki:He,lavenderblush:Ve,lavender:Xe,lawngreen:Qe,lemonchiffon:Ke,lightblue:Ze,lightcoral:er,lightcyan:rr,lightgoldenrodyellow:tr,lightgray:ar,lightgreen:or,lightgrey:nr,lightpink:ir,lightsalmon:lr,lightseagreen:sr,lightskyblue:fr,lightslategray:cr,lightslategrey:dr,lightsteelblue:ur,lightyellow:gr,lime:hr,limegreen:vr,linen:br,magenta:pr,maroon:mr,mediumaquamarine:yr,mediumblue:wr,mediumorchid:kr,mediumpurple:xr,mediumseagreen:Ar,mediumslateblue:Er,mediumspringgreen:Pr,mediumturquoise:Cr,mediumvioletred:Rr,midnightblue:Tr,mintcream:_r,mistyrose:Dr,moccasin:$r,navajowhite:Mr,navy:Nr,oldlace:Or,olive:Ir,olivedrab:Lr,orange:Ur,orangered:qr,orchid:Sr,palegoldenrod:Fr,palegreen:Wr,paleturquoise:jr,palevioletred:zr,papayawhip:Br,peachpuff:Jr,peru:Gr,pink:Yr,plum:Hr,powderblue:Vr,purple:Xr,rebeccapurple:Qr,red:Kr,rosybrown:Zr,royalblue:et,saddlebrown:rt,salmon:tt,sandybrown:at,seagreen:ot,seashell:nt,sienna:it,silver:lt,skyblue:st,slateblue:ft,slategray:ct,slategrey:dt,snow:ut,springgreen:gt,steelblue:ht,tan:vt,teal:bt,thistle:pt,tomato:mt,turquoise:yt,violet:wt,wheat:kt,white:xt,whitesmoke:At,yellow:Et,yellowgreen:Pt};function Rt(e,r=[]){return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(e&255)/255,r}function Tt(e){let r=e.toString(16);return r="000000".substring(0,6-r.length)+r,`#${r}`}function _t(e){return typeof e=="string"&&(e=Ct[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1))),parseInt(e,16)}function Dt(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}function $t(){const e=[],r=[];for(let a=0;a<32;a++)e[a]=a,r[a]=a;e[d.NORMAL_NPM]=d.NORMAL,e[d.ADD_NPM]=d.ADD,e[d.SCREEN_NPM]=d.SCREEN,r[d.NORMAL]=d.NORMAL_NPM,r[d.ADD]=d.ADD_NPM,r[d.SCREEN]=d.SCREEN_NPM;const t=[];return t.push(r),t.push(e),t}const P=$t();function Mt(e,r){return P[r?1:0][e]}function Nt(e,r,t,a){return t=t||new Float32Array(4),a||a===void 0?(t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=r,t}function Ot(e,r){if(r===1)return(r*255<<24)+e;if(r===0)return 0;let t=e>>16&255,a=e>>8&255,o=e&255;return t=t*r+.5|0,a=a*r+.5|0,o=o*r+.5|0,(r*255<<24)+(t<<16)+(a<<8)+o}function It(e,r,t,a){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(a||a===void 0)&&(t[0]*=r,t[1]*=r,t[2]*=r),t[3]=r,t}function Lt(e,r=null){const t=e*6;if(r=r||new Uint16Array(t),r.length!==t)throw new Error(`Out buffer length is incorrect, got ${r.length} and expected ${t}`);for(let a=0,o=0;a<t;a+=6,o+=4)r[a+0]=o+0,r[a+1]=o+1,r[a+2]=o+2,r[a+3]=o+0,r[a+4]=o+2,r[a+5]=o+3;return r}function C(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}const Ut={Float32Array,Uint32Array,Int32Array,Uint8Array};function qt(e,r){let t=0,a=0;const o={};for(let s=0;s<e.length;s++)a+=r[s],t+=e[s].length;const n=new ArrayBuffer(t*4);let i=null,l=0;for(let s=0;s<e.length;s++){const f=r[s],c=e[s],p=C(c);o[p]||(o[p]=new Ut[p](n)),i=o[p];for(let h=0;h<c.length;h++){const _=(h/f|0)*a+l,D=h%f;i[_+D]=c[h]}l+=f}return new Float32Array(n)}function St(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Ft(e){return!(e&e-1)&&!!e}function Wt(e){let r=(e>65535?1:0)<<4;e>>>=r;let t=(e>255?1:0)<<3;return e>>>=t,r|=t,t=(e>15?1:0)<<2,e>>>=t,r|=t,t=(e>3?1:0)<<1,e>>>=t,r|=t,r|e>>1}function jt(e,r,t){const a=e.length;let o;if(r>=a||t===0)return;t=r+t>a?a-r:t;const n=a-t;for(o=r;o<n;++o)e[o]=e[o+t];e.length=n}function zt(e){return e===0?0:e<0?-1:1}let Bt=0;function Jt(){return++Bt}const R={};function Gt(e,r,t=3){if(R[r])return;let a=new Error().stack;typeof a>"u"?console.warn("PixiJS Deprecation Warning: ",`${r}
Deprecated since v${e}`):(a=a.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${r}
Deprecated since v${e}`),console.warn(a),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${r}
Deprecated since v${e}`),console.warn(a))),R[r]=!0}const Yt={},v=Object.create(null),b=Object.create(null);function Ht(){let e;for(e in v)v[e].destroy();for(e in b)b[e].destroy()}function Vt(){let e;for(e in v)delete v[e];for(e in b)delete b[e]}class Xt{constructor(r,t,a){this.canvas=g.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=a||g.RESOLUTION,this.resize(r,t)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(r,t){this.canvas.width=Math.round(r*this.resolution),this.canvas.height=Math.round(t*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(r){this.canvas.width=Math.round(r)}get height(){return this.canvas.height}set height(r){this.canvas.height=Math.round(r)}}function Qt(e){let r=e.width,t=e.height;const a=e.getContext("2d"),o=a.getImageData(0,0,r,t).data,n=o.length,i={top:null,left:null,right:null,bottom:null};let l=null,s,f,c;for(s=0;s<n;s+=4)o[s+3]!==0&&(f=s/4%r,c=~~(s/4/r),i.top===null&&(i.top=c),(i.left===null||f<i.left)&&(i.left=f),(i.right===null||i.right<f)&&(i.right=f+1),(i.bottom===null||i.bottom<c)&&(i.bottom=c));return i.top!==null&&(r=i.right-i.left,t=i.bottom-i.top+1,l=a.getImageData(i.left,i.top,r,t)),{height:t,width:r,data:l}}const T=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Kt(e){const r=T.exec(e);if(r)return{mediaType:r[1]?r[1].toLowerCase():void 0,subType:r[2]?r[2].toLowerCase():void 0,charset:r[3]?r[3].toLowerCase():void 0,encoding:r[4]?r[4].toLowerCase():void 0,data:r[5]}}let m;function Zt(e,r=globalThis.location){if(e.startsWith("data:"))return"";r=r||globalThis.location,m||(m=document.createElement("a")),m.href=e;const t=k.parse(m.href),a=!t.port&&r.port===""||t.port===r.port;return t.hostname!==r.hostname||!a||t.protocol!==r.protocol?"anonymous":""}function ea(e,r=1){const t=g.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):r}export{b as BaseTextureCache,Xt as CanvasRenderTarget,T as DATA_URI,sa as EventEmitter,Yt as ProgramCache,v as TextureCache,Vt as clearTextureCache,Mt as correctBlendMode,Lt as createIndicesForQuads,Kt as decomposeDataUri,Gt as deprecation,Ht as destroyTextureCache,Zt as determineCrossOrigin,ca as earcut,C as getBufferType,ea as getResolutionOfUrl,Rt as hex2rgb,Tt as hex2string,qt as interleaveTypedArrays,ia as isMobile,Ft as isPow2,S as isWebGLSupported,Wt as log2,St as nextPow2,A as path,P as premultiplyBlendMode,Nt as premultiplyRgba,Ot as premultiplyTint,It as premultiplyTintToRgba,jt as removeItems,Dt as rgb2hex,q as sayHello,zt as sign,U as skipHello,_t as string2hex,Qt as trimCanvas,Jt as uid,k as url};
//# sourceMappingURL=utils.min.mjs.map
